# Обработка изображений на мобильных устройствах

© Бибиков С.А., к.т.н., доцент кафедры суперкомпьютеров и общей информатики, Самарский университет

## Лекция 7. Контрастирование. Преобразования яркости

Содержание:


### 7.1 История преобразования яркости

Идея преобразования яркости появилась с появлением фотографии. С помощью регуляции времени проявки можно было попытаться исправить ошибки при выборе времени экспозиции в ранней фотографии. Слишком темные фото, снятые при недостаточной экспозиции можно было сделать светлее, светлые темнее. Качество детализации конечно страдало, но общее впечатление от изображение могло улучшаться. Позже, с усовершенстованием процессов и химии съемки и проявки фотоизображений, стала доступна операция, которую называют препарированием. С появлением телевидения появилась необходимость настраивать получемые по радиосвязи изображения под конкретный приемник. По аналогии с громкостью на радио, одними из основных настравиваемых характеристик изображения стали яркость и контрастность (хотя тут справедливее использовать термин динамически диапазон) изображения.

В ЭЛТ за яркость отвечало напряжение разгоняющее электроны на пути к люминисцентному слою экрана. Повышение напряжения приводило к увеличению энергии электрона и соответственно к большей светимости люминофора на экране. Динамический диапазон (или применительно к эпохе аналогового ТВ контрастность) - отношение яркости самой яркой точки (той, что считается белой) к самой тусклой (той, что считается черной). В более продвинутые времена применялись специальные каскады обрабатывающие приходящий сигнал.

Сейчас в цифровой технике применяются те же аналоги каскадов, только в цифровом варианте. Частично с таки типом преобразований вы уже сталкивались при изучении гамма-коррекции. Рассмотрим некоторую корректирующую функцию _f_, которая работает только с каналом яркости _L_ на изображении.
<div align="center">
  <img src="https://render.githubusercontent.com/render/math?math=L=f(L)">
</div>

Если предположить, что эта функция не вносит никаких изменений, то ее график будет выглядеть так:

<div align="center">
  <img src="https://github.com/bbkvsrg/lecture-notes/blob/main/%D0%9E%D0%98%D0%9C%D0%A3/lecture_07/images/l7_1.png" width="66%" title="Функция, которая не изменяет яркость"/>
  
  Рисунок 1 – Функция неизменной яркости
</div>

Это базовая функция, которой удобно сравнивать и относительно которой удобно оценивать поведение других функций.

### 7.2 Контраст и преобразование яркости

Локальный контраст это разница между яркостями различных предметов на изображении. Отсюда довольно простая идея: чем круче линия преобразования яркости на каком то промежутке, тем выше будет контраст после преобразования. Объясняется довольно просто на примере: допустим у нас значение яркости фона равно 70, а яркости объекта 150. Разница 80. 

<div align="center">
  <img src="https://github.com/bbkvsrg/lecture-notes/blob/main/%D0%9E%D0%98%D0%9C%D0%A3/lecture_07/images/l7_1.png" width="66%" title="Функция, которая не изменяет яркость"/>
  
  Рисунок 2 – Низкоконтрастное изображение
</div>

Если мы используем преобразование яркости, показанное на рисунке 3, то значение яркости фона станет равным 20, а объекта 
###
###
###
###
###
###
